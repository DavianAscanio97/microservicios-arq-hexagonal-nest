# üß© Estructura del Dominio - Usuario
### üìÑ User.entity.ts
 1. Define la entidad principal del usuario en el dominio

 2. Contiene todos los atributos del modelo de usuario, tanto requeridos como opcionales.

 3. Implementa la l√≥gica de eventos de dominio mediante los m√©todos addDomainEvent y pullDomainEvents, permitiendo emitir eventos ante acciones que modifican el estado del usuario.

 4. Utiliza Value Objects (Email, Password, FirstName, LastName, etc.) para garantizar la validaci√≥n, inmutabilidad y encapsulamiento de valores cr√≠ticos del dominio.

 5. Emplea getters con prefijo _ para exponer valores primitivos desde los Value Objects sin romper su encapsulamiento. Por ejemplo: user._email retorna el valor primitivo de Email.

 6. Cumple con los principios DDD (Domain-Driven Design), encapsulando estado y l√≥gica relacionada.

#### üîê Consideraci√≥n: los atributos como domainEvents pueden mantenerse encapsulados si se desea ocultar la l√≥gica interna fuera del agregado.

### ‚öôÔ∏è User.actions.ts
 1. Contiene toda la l√≥gica de comportamiento del usuario (acciones que puede realizar)

 2. Aqu√≠ se agrupan todas las acciones y comportamientos del usuario, como: actualizar datos, verificar cuenta, bloquear/desbloquear, eliminar/restaurar, etc.

 3. Cada acci√≥n est√° separada en un m√©todo est√°tico siguiendo el principio Single Responsibility del patr√≥n SOLID.

 4. Se encargan de emitir los eventos de dominio relevantes (UserUpdatedEvent, UserDeletedEvent, etc.) seg√∫n la acci√≥n realizada, lo cual habilita comunicaci√≥n entre servicios o procesos as√≠ncronos.

 5. Las acciones validan reglas del negocio directamente relacionadas al usuario, como:

 6. Que no se pueda eliminar dos veces.

 7. Que la cuenta est√© activa o no bloqueada antes de continuar.

 8. Que la contrase√±a coincida con la de confirmaci√≥n.

 9. Se asegura el uso correcto de fechas, estados, flags booleanos, y otras propiedades del modelo.

### üè≠ User.factory.ts
 1. Punto central para la creaci√≥n y transformaci√≥n de objetos relacionados al usuario

 2. Centraliza la creaci√≥n de nuevas instancias de usuario a trav√©s de m√©todos create, fromDTO, fromPrimitives, etc.

 3. Permite construir el objeto User con todas sus dependencias correctamente inyectadas (Value Objects, fechas por defecto, roles, etc.).

 4. Separa la l√≥gica de creaci√≥n de la l√≥gica de comportamiento, siguiendo el patr√≥n Factory.

 5. Facilita la conversi√≥n entre:

 6. DTOs ‚Üî Entidad del dominio

 7. Objetos planos ‚Üî Instancias completas del dominio

 8. Reduce duplicaci√≥n de l√≥gica al momento de instanciar usuarios en distintas capas (casos de uso, controladores, tests).

#### üéØ Consideraci√≥n: No incluir aqu√≠ acciones ni l√≥gica de negocio. Esta clase es solo para construir o transformar datos al dominio.

### ‚úÖ Recomendaciones generales
 1. Mantener la separaci√≥n clara entre entidad (estado), acciones (comportamiento) y f√°brica (creaci√≥n) ayuda a escalar y mantener el proyecto f√°cilmente.

 2. Aseg√∫rate que cada evento de dominio est√© descrito, probado y manejado correctamente en su correspondiente manejador/event handler.

 3. Usa UserActions dentro de casos de uso (application layer), no directamente en controladores.

 4. Nunca crees un User directamente usando new User(...) fuera de la f√°brica.